---
slug: postman-part-2
title: The Ultimate Guide to Using Postman to Document and Test Your API in 2023 (Part 2)
authors: dylan
draft: true
---

import { PlusButton } from "./assets/PlusButton"
import { DotsButton } from "./assets/DotsButton"

## Documentation & Testing

All Collections fall under two categories:

1. Example requests (for documentation)
2. Test requests (for testing)

All example requests should all live under the same Collection and should
include examples for every <Tooltip tip="An operation for an API is a
combination of HTTP Method and sub-path, like 'GET /users'" text="operation"/>
in an API.

Each set of test requests should live under its own Collection. These
Collections automate assertions for many requests at the same time.

### Example Requests

We suggest that you organize example requests into a single Collection to
isolate Collections used for testing. Most public Collections (e.g. [Salesforce
Platform
APIs](https://www.postman.com/salesforce-developers/workspace/salesforce-developers/collection/12721794-67cb9baa-e0da-4986-957e-88d8734647e2?action=share&creator=27661652))
can be categorized as a Collection of example requests since its purely used for
documentation.

#### Generate Collection from OAS (Recommended<Flame/>)

Generating your collections from an OAS can save a lot of time in bootstrapping
your Collection of example requests. Postman will automatically create a
`baseUrl` variable and setup Authentication based on your OAS. It will also
bootstrap requests for every operation prepopulating parameters from the
[schemas](https://spec.openapis.org/oas/v3.1.0#schema-object) in your OAS. This
is especially helpful if your API is complicated.

<VideoSection>

1. [Make sure the APIs element is visible on the sidebar](seek) by configuring your sidebar
1. [Create an API and give it a name](seek)
1. [Import your OAS](seek)
    1. If you are using our example API then import `openapi.json` from the repository
1. [Generate a collection from your definition](seek)

<VideoPlayer playbackRate={1.2} autoplay url="/video/generate-collection.mov"/>

</VideoSection>

<Admonition type="note">
The generated Collection will live in the "APIs" tab under your OAS definition.
This is slightly confusing as it won't be visible under the "Collections" tab.

If you want you can copy the Collection from your API tab to the Collections tab
by clicking the <DotsButton/> button next to your Collection.
<VideoPlayer playbackRate={1.2} autoplay url="/video/copy-to-collections.mov"/>
</Admonition>

If you don't have an OAS then you can always manually create a Collection and
add requests to it.

#### Save all the examples!

If you have multiple example requests for a particular operation, you should add
them for more documentation. Examples are particularly helpful if your operation
is <Tooltip text="polymorphic" tip="accepts different data shapes"/>, which can
make your API hard to document.

![Save Example Request](/img/save-example-request.png)

### Test Requests

Test requests can be used to build a suite of tests that automatically assert
request-reply for your API. Test requests live in their Collection with the
addition of a script that asserts and drives the behavior of the Collection
Runner. For every set of requests you would like to run sequentially you will
create a new Collection.

#### Test Script

[Scripting](https://learning.postman.com/docs/writing-scripts/intro-to-scripts/)
allows you to automate assertions and drive the behavior of your tests.

Say we have a Collection of two requests. to create two automated assertions:

1. The `GET /users` endpoint returns a list JSON value (i.e. `Array.isArray(response) == true`)
1. The `POST /users` endpoint returns an object JSON value (i.e. `typeof response === 'object' && !Array.isArray(response)`)

To add these assertions we write test scripts for each Request.

#### Collection Runner

Postman is not only amazing for individual requests but also for running multiple
requests at once (i.e. a "test"). Postman makes it extremely simple by
organizing sequential requests into a Collection.

Let's create a Collection with sequential requests from scratch.  Using our
[example API](#example-api-optional) we can sequentially run `Get users`,
`Create user`, and `Get users`.

Follow these steps to create your first test suite.

<VideoSection>
1. [Create a new collection](seek) (in this case we are copying the generated collection from the API tab)
1. [Organize requests in the order you want them to be executed by drag and dropping](seek)
1. [Rename requests to something meaningful if you want](seek)
1. [Right-click your collection and select "Run collection"](seek)
1. [Enable "Persist responses for a session" to inspect responses](seek)
1. [Click "Run ..."](seek)

<VideoPlayer autoplay playbackRate={1.2} url="/video/test-suite-1.mov"/>
</VideoSection>


##### Adding assertions

Say we want to add an assertion to ensure that after the `Create user` operation is run, the number of users is increased by 1 thereby

To add assertions we will use the "Tests" for a Request. On the right-hand side you will see

`pm.globals.set`


##### `postman.setNextRequest`

##### Looping Requests

#### Example Use Cases

##### Idempotency

##### Random Data

<Admonition type="info" title="Tip">
#### Console (Helpful<Flame/>)

<VideoSection>

Open the console at the bottom of the window to inspect your requests. This is
especially helpful for debugging <Tooltip tip="Using scripts to dynamically set
parameters" text="programmatic"/> or many requests.

<VideoPlayer autoplay url="/video/console.mov"/>

</VideoSection>
</Admonition>

## Setup Postman and GitHub Actions

### Postman API

### Export Collection

### Public Link

### Pointing to Preview Environment

### `newman`

### Reporters

### Debugging CI




